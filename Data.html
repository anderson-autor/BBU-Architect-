<script>
  // =========================================================
  // ARQUIVO DE DADOS E CONFIGURAÇÕES (DATA.HTML)
  // Edite aqui: Preços, Textos, Perguntas e Specs
  // =========================================================

  // --- 1. INVENTÁRIO E ESPECIFICAÇÕES DE HARDWARE ---
  
  // Lista bruta de modelos para popular o inventário
  var rawBoardList = "UBBPg3A (TN); UBBPg3B (TN); UBBPg2C (TN); UBBPg2A (TN); UBBPg3B (NR); UBBPg3B (LTE); UBBPg3A (NR); UBBPg3A (LTE); UBBPg2C (NR); UBBPg2C (LTE); UBBPg2A (NR); UBBPg2A (LTE); UBBPg1a (TN); UBBPg1a (NR); UBBPg1a (LTE)";

  // Especificações técnicas e preços das placas UBBP
  // Especificações técnicas e preços das placas UBBP
  var BOARD_SPECS_TN = {
      "UBBPg3A": { 
          limites: { mimo_lte: 6, mimo_nr: 6, std_lte: 12, std_nr: 6 },
          price: "R$ 48.722,16",
          desc: "Topo de Linha (Suporta 64TR em todos os modos)"
      },
      "UBBPg3B": { 
          limites: { mimo_lte: 3, mimo_nr: 3, std_lte: 0, std_nr: 0 },
          price: "R$ 48.238,92",
          desc: "Alta Capacidade (Apenas Massive MIMO)"
      },
      "UBBPg2A": { 
          // g2a TN: Bloqueia MIMO (0). Aceita 6 LTE e 3 NR (Standard).
          limites: { mimo_lte: 0, mimo_nr: 0, std_lte: 6, std_nr: 3 },
          price: "R$ 36.477,51",
          desc: "Intermediária (MIMO apenas no modo NR)"
      },
      "UBBPg2C": { 
          limites: { mimo_lte: 0, mimo_nr: 0, std_lte: 6, std_nr: 3 },
          price: "R$ 15.738,43",
          desc: "Entrada (Sem suporte a Massive MIMO)"
      },
      "UBBPg1a": { 
          limites: { mimo_lte: 0, mimo_nr: 0, std_lte: 3, std_nr: 0 },
          price: "R$ 10.402,11",
          desc: "Legado (Apenas LTE Std)"
      }
  };

  // Especificações das placas de Energia (UPEU) 
  var UPEU_SPECS = {
      "UPEUc": { capacity: 360, price: "R$ 850,00" },
      "UPEUd": { capacity: 650, price: "R$ 1.600,00" },
      "UPEUe": { capacity: 1100, price: "R$ 2.800,00" } // Padrão 5G
  };

  // Especificações de Consumo de Energia (Watts) 
  var POWER_SPECS = { 
      FAN: 60,            // 60W consumo
      UMPT: 35,           // 35W consumo
      UBBP: 160,          // 160W consumo (média)
      CABLE_CAPACITY: 2000, 
      CHASSIS_LIMIT: 3000   
  };

  // Cores de visualização
  var SITE_COLORS = ['#9b59b6', '#1abc9c', '#f1c40f', '#e91e63', '#e74c3c', '#2ecc71', '#34495e', '#e67e22'];
  var SECTOR_COLORS = { 'A': '#ff3333', 'B': '#33ff33', 'C': '#3388ff', 'null': '#e9f4f5' };

  // --- 2. CONTEÚDO EDUCACIONAL (TEORIA) ---
  
  // Textos dos modulos teóricos 
  const COURSE_THEORY = {
      0: `<h3 class="theory-section-title">Bem-vindo ao BBU Architect Simulator</h3><p>Este é um ambiente simulado para treinamento em BBU Huawei 5900. Antes de realizar as tarefas práticas, você deve estudar os conceitos teóricos de cada módulo.</p><p>Clique em <strong>"LI E COMPREENDI"</strong> abaixo para liberar a validação.</p>`,
      1: `<h3 class="theory-section-title">BBU - Unidade de Banda Base</h3><p>A BBU (Base Band Unit) realiza o processamento de sinal digital, convertendo sinais entre o núcleo da rede e as unidades de rádio (RRUs). Ela suporta <strong>2G, 3G, 4G e 5G NR</strong>.</p><h3 class="theory-section-title">Distribuição de Slots (BBU 5900)</h3><ul><li><strong>Slots 6 e 7:</strong> Destinados exclusivamente para placas de CONTROLE (UMPT).</li><li><strong>Slots 0 a 5:</strong> Destinados para placas de PROCESSAMENTO (UBBP).</li><li><strong>Slots 18 e 19:</strong> Destinados para módulos de ENERGIA (UPEU).</li><li><strong>Slot 16:</strong> Destinado para a unidade de VENTILAÇÃO (FAN).</li></ul><div class="theory-text-block theory-highlight">Regra de Ouro: Nunca deixe slots vazios abertos. Use Tampas (Dummies) para fechar buracos e garantir o fluxo de ar correto.</div>`,
      2: `<h3 class="theory-section-title">UBBP e Conectividade</h3><p>As placas UBBP (Universal Baseband Processing) gerenciam o tráfego de usuários e protocolos. Elas possuem portas SFP para conexão de fibra óptica com as RRUs.</p><h3 class="theory-section-title">Mapeamento de Portas</h3><p>A ordem de conexão padrão segue o código de cores:</p><ul><li><strong>Porta 0:</strong> Setor A (Vermelho)</li><li><strong>Porta 1:</strong> Setor B (Verde)</li><li><strong>Porta 2:</strong> Setor C (Azul)</li></ul><h3 class="theory-section-title">O que é SFP?</h3><p><strong>Small Form-factor Pluggable:</strong> É um transceptor que converte sinais elétricos da placa em sinais ópticos (luz). Sem o SFP, a porta é apenas uma "gaiola" (cage) vazia e não transmite dados.</p>`,
      3: `<h3 class="theory-section-title">UMPT - O Cérebro do Site</h3><p>A UMPT (Universal Main Processing & Transmission) controla toda a estação base, gerenciando configuração, alarmes e performance. Utilizado a Umptg2, por conectar ao 5G puro, o (SA). Já a Umpte era utilizada no NSA, no começo do 5G, onde usava o rádio do 5G e o cerebro do 4G.</p><h3 class="theory-section-title">Conexões Obrigatórias</h3><ul><li><strong>Transmissão (Backhaul):</strong> Conecta a BBU ao Core da Operadora. Sem isso, o site fica isolado.</li><li><strong>GPS (Sincronismo):</strong> Fornece o relógio de referência. A falta de GPS impede a BBU de sincronizar quadros TDD (Time Division Duplex), derrubando a rede.</li></ul>`,
      4: `<h3 class="theory-section-title">UPEU - Sistema de Energia</h3><p>A função mais crítica da UPEU é converter a energia que chega da fonte externa para uma voltagem que as placas internas possam usar.
          Conversão: Ela recebe a alimentação principal (geralmente -48V DC) e converte para +12V DC, que é a voltagem usada pelas placas de processamento e controle (como a UMPT e a UBBP).
          Proteção: Ela protege os componentes internos contra surtos e flutuações de energia..</p><h3 class="theory-section-title">Redundância</h3><p>Recomenda-se conectar cabos de energia em ambos os slots (18 e 19) para redundância (1+1). Se um falhar, o outro assume a carga.</p><div class="theory-text-block theory-highlight">ATENÇÃO: Polaridade Invertida causa curto-circuito imediato! (Azul = 0V/Positivo, Preto = -48V/Negativo).</div>`,
      5: `<h3 class="theory-section-title">Modelos de Placas UBBP</h3><p>Clique nos modelos abaixo para ver as especificações:</p><div class="theory-interactive-menu"><button class="btn-theory-tab active" onclick="switchTheoryTab('t-g2c')">UBBPg2c</button><button class="btn-theory-tab" onclick="switchTheoryTab('t-g2a')">UBBPg2a</button><button class="btn-theory-tab" onclick="switchTheoryTab('t-g3b')">UBBPg3b</button><button class="btn-theory-tab" onclick="switchTheoryTab('t-g3a')">UBBPg3a</button></div><div id="t-g2c" class="theory-tab-content active"><h4>UBBPg2c</h4><p>Placa de entrada. Utilizada para rádios que <strong>não são Massive MIMO</strong>.</p><ul><li>Suporta combinações mistas (TN - TDD).</li><li>Ideal para 1x8TR, 2x8TR ou 4TR.</li><li><strong>Risco:</strong> Pode sofrer overload com configurações pesadas de 5G.</li></ul></div><div id="t-g2a" class="theory-tab-content"><h4>UBBPg2a</h4><p>Bastante utilizada para expansão e Massive MIMO.</p><ul><li>Suporta Massive MIMO (64TR) em NR ou LTE.</li><li><strong>Limitação:</strong> Não suporta combinações mistas no modo TN.</li><li>Combinação comum: 3x64TR (LTE-TDD).</li></ul></div><div id="t-g3b" class="theory-tab-content"><h4>UBBPg3b</h4><p>Alta capacidade. Para projetos em grandes cidades.</p><ul><li>Suporta Massive MIMO em NR/LTE/TN.</li><li>Meta comum: 1x64TR (NR-TDD).</li></ul></div><div id="t-g3a" class="theory-tab-content"><h4>UBBPg3a</h4><p>Topo de linha (neste simulador). Alta flexibilidade.</p><ul><li>Suporta combinações mistas em todos os modos.</li><li>Capaz de processar múltiplas células 5G simultâneas.</li></ul></div>`,
      6: `<h3 class="theory-section-title">Sistema de Resfriamento (FAN)</h3><p>A unidade FAN dissipa o calor gerado pelas placas de alta potência (UMPT/UBBP). Se a ventilação falhar, a temperatura sobe rapidamente.</p><ul><li><strong>Proteção:</strong> O sistema desliga automaticamente (Shutdown) se atingir temperatura crítica para evitar danos físicos.</li><li><strong>Manutenção:</strong> A substituição deve ser feita rapidamente.</li></ul>`,
      7: `<h3 class="theory-section-title">Checklist de Deploy</h3><p>Antes de entregar o site (Deploy), verifique:</p><ol><li><strong>Slots Abertos:</strong> Feche todos com Dummies.</li><li><strong>Alarmes:</strong> O comando "LST ALM" deve retornar "No alarm found".</li><li><strong>Energia:</strong> Capacidade > Consumo (sem sobrecarga).</li><li><strong>Transmissão:</strong> GPS e Fibra de Transmissão conectados.</li><li><strong>Rádio:</strong> Cabos de fibra configurados com Setor e Tecnologia.</li></ol>`,
      8: `<h3 class="theory-section-title">Instalação de Torre (RRU)</h3><p>No topo da torre, a ordem de instalação é crítica para a segurança e funcionamento:</p><ol><li><strong>Suporte (Bracket):</strong> Fixado primeiro no mastro.</li><li><strong>Rádio (RRU):</strong> Içado e fixado no suporte.</li><li><strong>Aterramento:</strong> Conectado IMEDIATAMENTE após fixar o rádio para proteção contra descargas.</li><li><strong>Cabo Híbrido:</strong> Fibra e energia vindos da BBU.</li><li><strong>Vedação:</strong> Impermeabilização (Cold Shrink) para evitar entrada de água no conector (proteção de VSWR).</li></ol>`
  };

  // --- 3. DADOS DO QUIZ FINAL ---
  
  // Perguntas do exame 
  const QUIZ_DATA = [
      { q: "1. Qual é a função principal da BBU5900 dentro de uma estação base de telecomunicações, de acordo com o manual?", opts: ["Atuar como a unidade central para processamento de sinal digital e gerenciamento de recursos de rádio", "Resfriar as unidades de rádio remotas (RRUs) que ficam no topo das torres", "Converter os sinais de rádio recebidos pelas antenas em energia elétrica para o sistema.", "Fornecer a conexão física de fibra óptica diretamente para os dispositivos dos usuários finais."], correct: 0, exp: "Esta descrição corresponde à definição fornecida no manual, que posiciona a BBU5900 como o centro de processamento da estação base."
      },
      { q: "2.Qual componente da BBU5900 é descrito como o 'cérebro' de controle obrigatório, responsável por gerenciar toda a estação base e fornecer o link de backhaul?", opts: ["UMPT (Unidade Universal de Processamento e Transmissão Principal)", "UBBP (Unidade Universal de Processamento de Banda Base)", "FAN (Módulo de Ventilação)", "UPEU (Unidade de Interface de Energia e Ambiente do Usuário)"], correct: 0, exp: "O manual atribui as funções de controle, gerenciamento, backhaul e relógio de referência a esta unidade, caracterizando-a como o centro de comando"
      },
      
      { q: "3. Durante a implantação da BBU5900, um requisito é considerado indispensável para a validação do sistema, e sua falha gera um alarme crítico. Qual é esse requisito?", opts: ["A utilização de cabos de fibra óptica de uma marca específica", "A configuração de todas as portas da UBBP para o Setor Vermelho (A)", "Uma conexão contínua e estável com um sinal GPS para sincronização", "A instalação de, no mínimo, duas placas UBBP para redundância"], correct: 2, exp: "O texto destaca explicitamente que a sincronização via GPS é um requisito indispensável e que sua falha impede a implantação final."
      },
      { q: "4. No chassi da BBU5900, quais slots são designados para a instalação das unidades de energia UPEU?", opts: ["Slot 16", "Slots 18 - 19", "Slots 0 - 5", "lots 6 - 7"], correct: 1, exp: "Conforme a tabela de distribuição, estes são os slots designados para as unidades de energia, permitindo redundância."
      },
      { q: "5. Qual é a principal função das placas da série UBBP dentro da BBU5900?", opts: ["Gerenciar a conexão de backhaul e fornecer o relógio de referência via GPS.", "Dissipar o calor gerado por todos os componentes de alto desempenho.", "Converter a corrente de entrada para -48V DC e alimentar as outras placas.", "Realizar o processamento intensivo de sinais de rádio em banda base."], correct: 3, exp: "O manual especifica que as placas UBBP são dedicadas ao processamento de sinal, que é a tarefa mais computacionalmente intensiva."
      },
      { q: "6. Analisando as placas da série UBBPg, qual modelo é mais adequado para aplicações de Massive MIMO (64TR), mas possui a limitação de não suportar combinações de modo misto em TN?", opts: ["UBBPg3a", "UBBPg2a", "UBBPg3b", "UBBPg2c"], correct: 1, exp: "O manual indica que este modelo suporta Massive MIMO (64TR), mas especifica claramente que sua limitação é não suportar combinações mistas no modo TN."
      },
      { q: "7. Qual placa UBBP é a mais flexível (Topo de Linha) suportando modos mistos?", opts: ["UBBPg1a", "UBBPg2c", "UBBPg2a", "UBBPg3a"], correct: 3, exp: "A UBBPg3a suporta NR, LTE e TN simultaneamente."
      },
      { q: "8. De acordo com o padrão de cores para configuração das portas em uma placa UBBP, qual setor é atendido pelas portas 2 e 5??", opts: ["Setor Vermelho (A)", "Setor Amarelo (D)", "Setor Azul (C)", "Setor Verde (B)"], correct: 2, exp: "A documentação especifica que as portas 2 e 5 são designadas para o Setor Azul (C)."
      },
      { q: "9.O que acontece se um SFP (Small Form-factor Pluggable) não estiver instalado em uma porta de uma placa UBBP?", opts: ["A porta opera em uma capacidade reduzida, usando um modo de emergência", "A BBU5900 automaticamente redireciona o tráfego para outra porta disponível", "A placa inteira gera um alarme crítico e para de funcionar", "A porta se torna uma 'gaiola' vazia e não funcional, incapaz de transmitir dados"], correct: 3, exp: "O manual descreve exatamente essa situação: sem o SFP, que é o transceptor, a porta física existe, mas é inoperante."
      },
      { q: "De acordo com o checklist de implantação, qual é a ação correta em relação a slots abertos no chassi da BBU5900?", opts: ["Preencher os slots com tampas (Dummies) para manter a integridade física.", "Instalar placas de reserva desligadas em todos os slots vazios.", "Deixar os slots abertos para permitir maior fluxo de ar e resfriamento.", "Cobrir os slots com fita adesiva para impedir a entrada de contaminantes."], correct: 0, exp: "O manual especifica o uso de 'Dummies/Tampas' para garantir que não haja slots abertos, mantendo o fluxo de ar e a proteção contra poeira."
      }
  ];

  // --- 4. DADOS DO TUTORIAL (ONBOARDING) ---
  
  // Passos do tutorial interativo 
  var tutorialData = [
      {
          title: "Bem-vindo ao BBU Architect",
          text: "Este é o Simulador de BBU 5900 (Training Edition).<br>Este tutorial irá guiá-lo pelas principais funcionalidades da interface para que você possa operar o equipamento com segurança.",
          targetId: null 
      },
      {
          title: "Placas Disponíveis (Inventário)",
          text: "Aqui estão as placas de hardware (UMPT, UBBP).<br><strong>Ação:</strong> Clique e arraste a placa desejada para dentro dos slots vazios da BBU (Centro da tela).",
          targetId: "boardInventory"
      },
      {
          title: "Adicionar Novo Site",
          text: "Este botão flutuante (+) no canto superior esquerdo permite criar novos <strong>Sites Remotos</strong> (RRU) para simular cenários centralizados (C-RAN).",
          targetId: "btnNewSite"
      },
      {
          title: "Conexão de Cabos",
          text: "Dentro de cada caixa (Local, Remoto, UMPT), existe um botão (+).<br>Use-o para criar cabos de fibra óptica ou energia e conectá-los às portas.",
          targetId: "headerLocal" 
      },
      {
          title: "Caixas de Controle & GPS",
          text: "Estas caixas representam a origem dos cabos de Transmissão e Sincronismo.<br>Elas <strong>DEVEM</strong> ser conectadas obrigatoriamente nas placas UMPT (Slots 6 ou 7).",
          targetId: "umptBox"
      },
      {
          title: "Modo Curso (Passo a Passo)",
          text: "Clique aqui para abrir o painel de treinamento.<br>Ele contém módulos guiados (Teoria + Prática) para ensinar desde a instalação básica até o troubleshooting.",
          targetId: null,
          highlightClass: "btn-course"
      },
      {
          title: "Terminal de Comandos",
          text: "Acesse o Console (MML) para verificar alarmes (LST ALM), inventário (DSP BRD) e validar a saúde do site como um técnico real.",
          highlightClass: "btn-console"
      },
      {
          title: "Ferramentas de Gestão",
          text: "<ul><li><strong>Relatório:</strong> Baixa PDF/Excel do projeto.</li><li><strong>Limpar:</strong> Reseta toda a simulação.</li><li><strong>Deploy:</strong> Valida e ativa o site (Animação Final).</li></ul>",
          targetId: null,
          highlightClass: "header-actions"
      }
  ];
</script>